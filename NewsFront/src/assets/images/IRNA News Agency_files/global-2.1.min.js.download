var debug=!0,uuid=0,siteUrl=window.location.host,spinner='<i class="icon-spinner icon-spin"/>',mouse={},__lang=void 0!==$("html").attr("lang")&&$("html").attr("lang")?$("html").attr("lang").split("-")[0]:"fa",__baseResourcePath=-1!==window.location.host.indexOf("localhost")||-1!==window.location.host.indexOf("nastooh")?"/":"/resources/theme/",$_GET={},cache={},flags={},fancyBoxDefaultOptions={openEffect:"fade",closeEffect:"fade",nextEffect:"none",prevEffect:"none",padding:3,aspectRatio:"true",loop:"false",closeBtn:!0,arrows:!0,nextClick:!0,loop:!1,keyboard:!0,arrows:!0,infobar:!0,toolbar:"auto",buttons:["slideShow","fullScreen","download","thumbs","close"],idleTime:10,hideScrollbar:!0,i18n:{en:{CLOSE:"Close",NEXT:"Next",PREV:"Previous",ERROR:"The requested content cannot be loaded. <br/> Please try again later.",PLAY_START:"Start slideshow",PLAY_STOP:"Pause slideshow",FULL_SCREEN:"Full screen",THUMBS:"Thumbnails",DOWNLOAD:"Download",SHARE:"Share",ZOOM:"Zoom"},fa:{CLOSE:"خروج",NEXT:"بعدی",PREV:"قبلی",ERROR:"خطا در دریافت تصویر",PLAY_START:"شروع اسلایدشو",PLAY_STOP:"قطع اسلایدشو",FULL_SCREEN:"تمام‌صفحه",THUMBS:"تصاویر بندانگشتی",DOWNLOAD:"دریافت",SHARE:"هم‌رسانی",ZOOM:"بزرگ‌نمایی"}},caption:function(t,e){return $(this).attr("title")||""}},i=0;String.prototype.toPersianDigits=function(){var t=["۰","۱","۲","۳","۴","۵","۶","۷","۸","۹"];return this.replace(/[0-9]/g,(function(e){return t[+e]}))},String.prototype.toEnglishDigits=function(){var t={"۰":"0","۱":"1","۲":"2","۳":"3","۴":"4","۵":"5","۶":"6","۷":"7","۸":"8","۹":"9"};return this.replace(/[^0-9.]/g,(function(e){return t[e]||e}))},$.cookie=function(t,e,a){if(arguments.length<2){for(var i=document.cookie.split(";"),n=0;n<i.length;n++){var r=i[n].replace(/^\s+/,"");if(0==r.indexOf(t+"="))return decodeURIComponent(r.substring(t.length+1).split("+").join(" "))}return null}var s=new Date;s.setTime(s.getTime()+a),document.cookie=t+"="+encodeURIComponent(e)+(a?";expires="+s.toGMTString():"")+";path=/"};var Global={get:function(t){return void 0!==t&&void 0!==window.cache[t]?window.cache[t]:null},set:function(t,e){return window.cache[t]=e,!0}},Cookie={lifetime:600,title:window.location.host.replace(/\./g,"")+"=",init:function(){},check:function(t){if(void 0===t)t=Cookie.title;return Cookie.get(Cookie.title)},parse:function(t){return void 0!==t&&t},delete:function(t){if(void 0===t)t=Cookie.title;document.cookie=t+"; Thu, 01 Jan 1970 00:00:01 GMT; path=/"},set:function(t,e){if(void 0===t)t=Cookie.title;t=Cookie.title;var a=new Date;a.setTime(a.getTime()+1e3*Cookie.lifetime);var i="expires="+a.toGMTString();return document.cookie=t+e+"; "+i+"; path=/",e},get:function(t){if(void 0===t)t=Cookie.title;for(var e=document.cookie.split(";"),a=0;a<e.length;a++){var i=e[a].trim();if(0===i.indexOf(t))return Cookie.parse(i.substring(t.length,i.length))}return""}},Storage={key:window.location.host.replace(/\./g,"").replace(":","_"),data:{},init:function(){void 0===window.storage&&(window.storage=localStorage);var t=Storage.parse(storage.getItem(Storage.key));Storage.data=t||{}},parse:function(t){return JSON.parse(t)},get:function(t,e){if(storage.getItem(Storage.key)){var a=Storage.parse(storage.getItem(Storage.key));if(void 0!==a[t])return a[t][e]}return null},set:function(t){storage.setItem(Storage.key,JSON.stringify(t)),Storage.init()},add:function(t,e,a){void 0!==t&&(void 0===Storage.data[t]&&(Storage.data[t]={}),void 0!==e&&void 0===Storage.data[t][e]&&(Storage.data[t][e]=a)),Storage.set(Storage.data)},clear:function(){storage.clear(),Storage.init()}},Carousel={_defaults:{items:1,auto:!1,fx:"fade",controls:!1,paging:!1,pagingHeader:!0,autoHeight:!1},init:function(){Carousel.updateDimensions(),$(window).resize((function(){Carousel.updateDimensions()})),$(".has-carousel").each((function(){Carousel.initializePlugin($(this))}))},initializePlugin:function(t,e){var a=t;a.hasClass("showcase")&&(a=Carousel.handleDescription(a));var i=a.attr("data-conf"),n=void 0!==i?JSON.parse(i):{},r=jQuery.extend({},Carousel._defaults),s=$.extend(r,n);a.hasClass("center-items")&&(s.center=!0),s.paging&&!a.find(".pagination").length&&(s.pagingHeader?a.find("> header").append('<div class="pagination"></div>'):a.find("> div").append('<div class="pagination"></div>'));var o=a.find(".pagination"),l=a.find("ul:first");if(!(l.find("> li").length<2)){var d={};switch(s.fx){default:d={in:!1,out:!1};break;case"fade":d={in:"fadeIn",out:"fadeOut"};break;case"slide":d={in:"slideInLeft",out:"slideOutRight"};break;case"roll":d={in:"rollIn",out:"rollOut"};break;case"zoom":d={in:"zoomIn",out:"zoomOut"};break;case"hinge":d={in:"hinge",out:"hinge"};break;case"rotate":d={in:"rotateIn",out:"rotateOut"};break;case"pulse":d={in:"pulse",out:"pulse"}}l.on("changed.owl.carousel",(function(t){if(a.hasClass("has-indicator")){var e=a.next(),i=t.item.index-2>=e.find("li").length||null===t.item.index?0:t.item.index-2;e.find("li.active").removeClass("active"),e.find("ul:first li").eq(i).addClass("active")}var n=$(t.target).find("li.has-player");if(n.length){n.removeClass("playing has-player");var r=n.find("figure:first > *").attr("id");jwplayer(r).remove(),window.setTimeout((function(){void 0!==flags.cachedPlayer&&void 0!==flags.cachedPlayer[r]&&n.find("figure:first").html(flags.cachedPlayer[r])}),500)}})),l.on("initialized.owl.carousel",(function(t){s.paging&&o.find("div").each((function(t){$(this).html("<span>"+(t+1)+"</span>")}))}));var c={loop:!0,rtl:!$("body").hasClass("ltr"),margin:0,stagePadding:0,autoHeight:s.autoHeight,autoWidth:1===s.items,items:"variable"===s.items?3:s.items,singleItem:1===s.items,autoplay:s.auto,autoplayTimeout:"number"==typeof s.auto||"string"==typeof s.auto?s.auto:5e3,animateOut:d.out,animateIn:d.in,dots:s.paging,dotsContainer:o,dotsClass:"",dotClass:"",paginationNumbers:!0,nav:s.controls,infinite:!0};if("variable"!==s.items&&(s.items>1?c.responsive={0:{items:2},480:{items:s.items-3},768:{items:s.items-1},992:{items:s.items}}:c.responsive={0:{mouseDrag:!1,touchDrag:!0},992:{mouseDrag:!0,touchDrag:!0}}),s.center&&!0===s.center&&(c.center=!0),a.hasClass("has-indicator"))Carousel.createIndicator(a).on("click","a",(function(t){t.preventDefault();var e=$(this).parents("li:first").index();$(this).parents("ul").find("li").removeClass("active"),$(this).parents("li:first").addClass("active"),l.trigger("to.owl.carousel",[parseInt(e),500,!0])}));l.owlCarousel(c),(s.controls||a.find(".pagers .next").length)&&(a.find(".pagers .next").click((function(t){l.trigger("next"),t.preventDefault()})),a.find(".pagers .prev").click((function(t){l.trigger("prev"),t.preventDefault()}))),"function"==typeof e&&e()}},createIndicator:function(t){var e=t.clone();return e.attr("class","box gallery-indicator no-header"),e.attr("id",e.attr("id")+"-indic"),e.find("ul:first li:first").addClass("active"),e.insertAfter(t),e},handleDescription:function(t,e){return t.find("li").find(".desc").length||$.each(t.find("li"),(function(){var t=$(this);void 0!==e&&!0===e&&(t.wrapInner('<div class="inner"></div>'),t=t.find(".inner:first")),$('<div class="desc overlay"></div>').insertAfter(t.find("> a")),t.find("h3")&&t.find("h3").appendTo(t.find(".desc")),t.find("h4")&&t.find("h4").prependTo(t.find(".desc")),t.find("p")&&t.find("p").appendTo(t.find(".desc"))})),t},updateDimensions:function(){$(".has-carousel").each((function(){var t=$(this),e=Helpers.parseJson(t.attr("data-conf"));!!t.hasClass("center-items")||void 0!==e.items&&1!==e.items||Carousel.handleItemsWidth(t)}))},handleItemsWidth:function(t,e){var a=t.width();return void 0!==e&&e.length||(e=t.find("ul:first")),e.find("li").each((function(){$(this).width(a)})),!0}},SlickCarousel={_defaults:{items:1,auto:!1,fx:null,controls:!1,paging:!1,pagingHeader:!0,autoHeight:!1,touchThreshold:20},init:function(){$(document).on("click",".is-indicator a",(function(t){t.preventDefault()})),$(".has-carousel").each((function(){SlickCarousel.initializePlugin($(this))}))},initializePlugin:function(t,e,a){var i=t.attr("data-conf"),n=void 0!==i?JSON.parse(i):{},r=jQuery.extend({},SlickCarousel._defaults),s=$.extend(r,n),o=$("body").hasClass("ltr");"object"==typeof a&&(s=$.extend(s,a)),(t.hasClass("center-items")||t.hasClass("is-indicator")&&!t.hasClass("indicator-v-default"))&&(s.center=!0),s.paging&&!t.find(".pagination").length&&(s.pagingHeader?t.find("> header").append('<div class="pagination"></div>'):t.find("> div").append('<div class="pagination"></div>')),t.attr("dir",o?"ltr":"rtl");var l=t.find(".pagination"),d=t.find("ul:first");if(!(d.find("> li").length<2)){!0===s.fade&&(s.fx=!0);var c=t.hasClass("cols")?t.attr("class").match(/cols-(\d+)/)[1]:s.items,u=+c;if(t.hasClass("slider-1"))u=1;c=+c;var f={infinite:!0,rtl:!o,adaptiveHeight:s.autoHeight,slidesToShow:void 0!==s.slidesToShow?s.slidesToShow:"variable"===s.items?3:c,slidesToScroll:"variable"===s.items?3:u,centerMode:s.center,autoplay:s.auto,arrows:s.controls,autoplaySpeed:"number"==typeof s.auto||"string"==typeof s.auto?s.auto:5e3,dots:s.paging,appendDots:l,dotsClass:"",vertical:!(void 0===s.vertical||!s.vertical)&&s.vertical,responsive:[{breakpoint:769,settings:{slidesToShow:c>1?c>6?4:s.center?1:c-1:c,slidesToScroll:c>1?c>6?4:s.center?1:c-1:c}},{breakpoint:481,settings:{slidesToShow:c>2?c>5?3:s.center?1:2:c,slidesToScroll:c>2?c>5?3:s.center?1:2:c}}]};if(SlickCarousel.beforeRender(t),t.hasClass("has-indicator")){var h=t.clone().attr("class","box cols cols-3 has-carousel hidden-desc no-header is-indicator").attr("data-target","#"+t.attr("id")).attr("data-conf",SlickCarousel.handleIndicatorConfig(t.attr("data-conf"),t.hasClass("indicator-v"))).attr("id","box-"+Math.floor(1001*Math.random()));t.hasClass("indicator-v")&&h.removeClass("cols cols-3"),t.hasClass("indicator-v-default")&&h.addClass("indicator-v-default"),t.wrap('<div class="carousel-width-indicator"></div>'),h.insertAfter(t),f.asNavFor="#"+t.next().attr("id")+" >div ul:first",f.arrows=!1,SlickCarousel.initializePlugin(h)}t.hasClass("is-indicator")&&(f.asNavFor=t.attr("data-target")+" >div ul:first",f.focusOnSelect=!0,f.slidesToScroll=1,t.hasClass("cols")||(f.responsive=null,f.rtl=!1)),d.slick(f),SlickCarousel.afterRender(t),"function"==typeof e&&e()}},handleIndicatorConfig:function(t,e){if(void 0===t)return"";var a=JSON.parse(t);return a.controls=!1,a.paging=!0,a.pagingHeader=!1,a.vertical=e,a.slidesToShow=e?5:3,a.items=e?5:3,JSON.stringify(a)},beforeRender:function(t){t.on("beforeChange",(function(e,a,i,n){var r=t.find("li.has-player");if(r.length){r.removeClass("playing has-player");var s=r.find("figure:first > *").attr("id");jwplayer(s).remove(),window.setTimeout((function(){r.find("figure:first").html(flags.cachedPlayer[s])}),500)}}))},afterRender:function(t){}},Pages={init:function(){$(window).load((function(){$(".has-pages").each((function(){var t=$(this),e=t.attr("data-conf"),a=void 0!==e?JSON.parse(e):{},n=$.extend({items:3},a);for(n.pages=t.find(".box-content ul li").length/parseInt(n.items),t.find(".box-title .pagination").length||t.find(".box-title").append('<div class="pagination"></div>'),i=0;i<n.pages;i++){active=0===i?' class="active"':"";var r="<div"+active+' data-start="'+i*n.items+'" data-end="'+(i*n.items+n.items-1)+'">'+(i+1)+"</div>";t.find(".box-title .pagination").append(r)}var s=t.find(".box-content ul li"),o=0;s.each((function(t){t>=n.items?$(this).hide():o+=$(this).outerHeight(!0)})),t.find(".box-content").height(o),t.on("click",".pagination div:not(.active)",(function(e){var a=$(this),i=a.attr("data-start"),n=a.attr("data-end");t.find(".pagination div").removeClass("active"),a.addClass("active"),s.fadeOut("fast",(function(){})),$.each(s,(function(){$(this).index()>=i&&$(this).index()<=n&&$(this).fadeIn("fast")}))}));window.setInterval((function(){(t.find(".pagination div.active").index()+1===t.find(".pagination div").length?t.find(".pagination div:first"):t.find(".pagination div.active").next()).trigger("click")}),7e3)}))}))}},Responsive={lg:function(){Responsive.Helpers.ShortLink.disable()},md:function(){Responsive.Helpers.ShortLink.disable()},sm:function(){Responsive.Helpers.ShortLink.enable()},xs:function(){Responsive.Helpers.ShortLink.enable()},Helpers:{ShortLink:{disable:function(){},enable:function(){}}},toggleVersions:function(t){if(void 0===t||!t)return!1;switch(t){case"desktop":$("meta[name=viewport]").attr("content","width=1200"),$.cookie(window.location.host.replace(/\./g,"")+"_responsive","desktop",6048e5),$(".responsive-tools").removeClass("visible-xs d-inline-block d-md-none").addClass("d-block"),$("#mobile-version").removeClass("hidden-xs d-none d-md-inline-block");break;case"mobile":$("meta[name=viewport]").attr("content","width=device-width, initial-scale=1.0"),$.cookie(window.location.host.replace(/\./g,"")+"_responsive","",-1),$("#mobile-version").addClass("hidden-xs d-none d-md-inline-block")}}},Tabs={init:function(){$(".box.has-tabs").each((function(t){var e=$(this).attr("data-conf"),a=void 0!==e?Helpers.parseJson(e):{};$("#"+a.tabGroup).length||$(this).before('<section class="tabs-container box" id="'+a.tabGroup+'"><ul class="nav nav-tabs" role="tablist"></ul><div class="tab-content"></div></section>'),Tabs.add($(this),$("#"+a.tabGroup))})),$(".tabs-container.box").each((function(){"undefined"==typeof __bootstrapVersion||__bootstrapVersion<4?($(this).find("ul.nav li:first").addClass("active"),$(this).find(".tab-content > .box:first").addClass("active in")):($(this).find(".tab-content > .box:first").addClass("active show"),$(this).find("ul.nav li:first a").addClass("active"))})),$(document).on("shown.bs.tab",'[data-toggle="tab"]',(function(t){var e=$($(t.target).attr("href"));if(e.find(".owl-carousel").length){(a=e.find(".box-content:first ul:first")).trigger("destroy.owl.carousel"),a.attr("class","").find("> * > li").unwrap();var a=e.find(".box-content:first ul:first");Carousel.initializePlugin(a.parents(".box:first"),!0)}e.find(".slick-slide").length&&(a=e.find("> div ul:first")).slick("setPosition",0)}))},add:function(t,e){var a={title:t.find("header h2").text(),id:t.attr("id"),content:t},i=e;t.addClass("no-title tab-pane").attr("role","tabpanel"),"undefined"==typeof __bootstrapVersion||__bootstrapVersion<4?(t.addClass("fade"),i.find("ul.nav").append('<li role="presentation"><a href="#'+a.id+'" role="tab" data-toggle="tab">'+a.title+"</a></li>")):i.find("ul.nav").append('<li class="nav-item"><a class="nav-link" id="'+a.id+'-tab" href="#'+a.id+'" role="tab" data-toggle="tab"><span>'+a.title+"</span></a></li>"),i.find(".tab-content").append(a.content)}},Rows={init:function(){$(".box.wrap-row").each((function(t){var e=$(this).attr("data-conf"),a=void 0!==e?JSON.parse(e):{};$("#"+a.tabGroup).length||$(this).before('<div class="row grouped-boxes" id="'+a.tabGroup+'"></div>'),void 0!==a.groupTitle&&a.groupTitle&&$("#"+a.tabGroup).prepend('<h2 class="group-title">'+a.groupTitle+"</h2>"),Rows.add($(this),$("#"+a.tabGroup))}))},add:function(t,e){for(var a=[],i=[],n=t.attr("class").split(" "),r=0;r<n.length;r++)t.hasClass("skip-bg")||n[r]&&n[r].match(/^bg-/)&&(i.push(n[r]),delete n[r]),n[r]&&n[r].match(/^col-/)&&(a.push(n[r]),delete n[r]),n[r]&&n[r].match(/^order-/)&&(a.push(n[r]),delete n[r]),n[r]&&n[r].match(/has-border/)&&(i.push(n[r]),delete n[r]);if(e.append(t),i.length)for(var s=0;s<i.length;s++)e.hasClass(i[s])||e.addClass(i[s]);t.attr("class",n.join(" ")),t.wrap('<div class="'+a.join(" ")+'"></div>')}},Helpers={init:function(t){Helpers.getURLParams(),Helpers.responsiveResize(),Helpers.handleBack2Top(),Helpers.togglables(),Helpers.handleFrame(),Helpers.handleEventListeners(),Helpers.randomAd(),Helpers.inlineAd(),$(window).resize((function(){Helpers.responsiveResize(),void 0===flags.handledResposiveMenu&&Helpers.responsiveMenu()})),void 0!==t&&$.each(t,(function(t){Helpers[this]()}))},handleEventListeners:function(){$(document).on("click",'[href="#news-comment"]',(function(t){t.preventDefault(),$("html, body").animate({scrollTop:$("#news-comment").offset().top-50},700)}))},getURLParams:function(){document.location.search.replace(/\??(?:([^=]+)=([^&]*)&?)/g,(function(){function t(t){return decodeURIComponent(t.split("+").join(" "))}$_GET[t(arguments[1])]=t(arguments[2])}))},parseJson:function(t){return void 0!==t?JSON.parse(t):{}},randomIntFromInterval:function(t,e){return Math.floor(Math.random()*(e-t+1)+t)},responsiveResize:function(){var t=$(window).width();t<768?($("body").addClass("_xs").removeClass("_sm _md _lg"),Responsive.xs()):t>767&&t<992?($("body").addClass("_sm").removeClass("_xs _md _lg"),Responsive.sm()):t>991&&t<1200?($("body").addClass("_md").removeClass("_xs _sm _lg"),Responsive.md()):t>1199&&($("body").addClass("_lg").removeClass("_xs _sm _md"),Responsive.lg())},getAspectRatio:function(t){if(t.is("[class*=ratio-]")){if(t.hasClass("ratio-19-6"))return"16:9";if(t.hasClass("ratio-21"))return"21:10";if(t.hasClass("ratio-3-2"))return"3:2"}return"4:3"},handleBack2Top:function(){$(window).scroll((function(){$(window).scrollTop()>112?$(".totop").stop().fadeIn(500):$(".totop").stop().fadeOut(500)})),$(".totop").click((function(t){$("html, body").animate({scrollTop:0},700),t.preventDefault()}))},responsiveMenu:function(){flags.handledResposiveMenu=!0;var t=$("#menu ul:first li");$.each(t,(function(){$(this).find("ul").find("li").length&&$(this).addClass("has-child").prepend('<span class="submenu-toggler"><i class="glyphicon-plus icon-plus"></i></span>')})),$(document).one("tap click","span.submenu-toggler",(function(){var t=$("#menu ul:first li");$.each(t,(function(){var t=$(this).find("ul");t.find("li").length&&t.css("display","none")}))})),$(document).on("tap click","span.submenu-toggler",(function(){var t=$(this).parent().find(".submenu:first");t.is(":hidden")?(t.slideDown("fast"),$(this).find("i").removeClass("glyphicon-plus icon-plus").addClass("glyphicon-minus icon-minus")):(t.slideUp("fast"),$(this).find("i").removeClass("glyphicon-minus icon-minus").addClass("glyphicon-plus icon-plus"))})),Helpers.handleReponsiveMenu()},absoluteMenu:function(t){$("ul.submenu:visible").length&&($("body").hasClass("_main-margin")||window.setTimeout((function(){Helpers.addMainMarinTop()}),100)),$(window).resize((function(){window.setTimeout((function(){Helpers.addMainMarinTop()}),200)}))},addMainMarinTop:function(){var t=void 0!==t?t:$("main:first");t.css({"margin-top":$("ul.submenu:visible").height()}),$("body").addClass("_main-margin")},togglables:function(){$(document).on("click","[data-toggle]",(function(t){t.preventDefault(),t.stopPropagation();var e=void 0!==$(this).attr("href")?$(this).attr("href"):$(this).attr("data-target");switch($(this).attr("data-toggle")){case"scroll":$("html, body").animate({scrollTop:$(e).offset().top},"slow");break;case"toggle":$(e).is(":visible")?$(e).fadeOut("fast"):($(e).fadeIn("fast"),void 0!==$(this).attr("data-focus")&&$($(this).attr("data-focus")).focus());break;case"slide":$(e).is(":visible")?$(e).slideUp("fast"):($(e).slideDown("fast"),void 0!==$(this).attr("data-focus")&&$($(this).attr("data-focus")).focus())}return!1}))},handleReponsiveMenu:function(){$("#toggle-menu").click((function(t){var e=$("#menu ul:first");e.length&&(e.is(":visible")?e.slideUp():e.slideDown()),t.preventDefault()}))},encrypt:function(t){var e="";for(i=0;i<t.length;i++){var a=123^t.charCodeAt(i);e+=String.fromCharCode(a)}return e},cleanString:function(t){return t.replace(/\W/g,"")},inIframe:function(){try{return window.self!==window.top}catch(t){return!0}},handleFrame:function(){Helpers.handleReferrers();var t=$("meta[property='nastooh:iframe']");if(Helpers.inIframe()&&(!t.length||"allow"!=t.attr("content"))){var e=document.referrer.replace("http://","").replace("https://","").replace("www.","").split(".")[0].split(":")[0],a=$("link[rel=canonical]").attr("href").replace("https://","http://")+"#ref="+e;window.setTimeout((function(){window.top.location=a}),1e3)}},setPrayerTimes:function(t,e){(e=void 0!==e?e:$("ul.prayers")).find("[data-type=fajr] .time").text(t.fajr),e.find("[data-type=dhuhr] .time").text(t.dhuhr),e.find("[data-type=maghrib] .time").text(t.maghrib),e.find("[data-type=sunrise] .time").text(t.sunrise),e.find("[data-type=sunset] .time").text(t.sunset),e.find("[data-type=midnight] .time").text(t.midnight)},loadTemplate:function(t,e,a,i){var n=void 0!==i&&void 0!==i.theme?i.theme:"global";e=void 0!==e?e:"";return $.ajax({url:__baseResourcePath+n+"/partials/"+t+(""!==e?"-":"")+e+(a&&"table"===e?"_condensed":"")+".html",contentType:"text/template7"})},handleReferrers:function(){if(""!==location.hash&&0===location.hash.indexOf("#ref="))switch(location.hash.replace("#ref=","")){case"shahrekhabar":$("body").addClass("has-frame").prepend('<iframe width="100%" scrolling="no" height="146px" frameborder="0" marginheight="0" marginwidth="0" src="https://www.shahrekhabar.com/headerssl.jsp" name="shahrekhabar" style="background-color: #ffffff;"></iframe>')}},handleSportsModal:function(){$(document).on("show.bs.modal",".modal.sports-modal",(function(){var t=this,e="fixture-"+$(t).data("id");window.location.hash=e,window.onhashchange=function(){location.hash?$(t).modal("show"):$(t).modal("hide")}})),$(document).on("hidden.bs.modal",".modal.sports-modal",(function(){history.replaceState("",document.title,window.location.pathname)}))},countVisit:function(t,e){var a,i,n;void 0===(t=void 0!==t?t:$("meta[property='nastooh:nid']").attr("content"))&&(a=$("meta[property='nastooh:topicId']").attr("content"),i=$("meta[property='nastooh:keywordId']").attr("content"),n=$("meta[property='nastooh:personId']").attr("content"));e=void 0!==e?"&src="+e:"";var r="news";void 0!==a&&(t=a,r="topic"),void 0!==i&&(t=i,r="keyword"),void 0!==n&&(t=n,r="person"),void 0!==t&&t&&$.ajax({url:"/rest/visit",data:"nid="+t+e+"&obj="+r,type:"post",success:function(t){"news"==r&&Helpers.randomCaptchaKey(JSON.parse(t).captchaKey)}})},randomCaptchaKey:function(t){if($("#captchaImg").length&&$("#captchaKey").length){var e=void 0!==t?t:Math.floor(9e9*Math.random())+1e10;$("#captchaKey").val(e);var a=$("#captchaImg");if(-1!==a.attr("src").indexOf("?key=")){var i=a.attr("src");a.attr("src",i.substr(0,i.indexOf("key="))+"key="+e)}else a.attr("src",$("#captchaImg").attr("src")+"?key="+e)}},inlineAd:function(){$(".ads-inline").length&&$.each($(".ads-inline"),(function(){var t=$(this),e=t.attr("class").split(/\s+/),a=t.find("ul li");a.addClass("inline-ad"),t.hasClass("show-inline-xs")&&a.addClass("d-md-none").addClass("d-lg-none").addClass("d-xl-none");for(var i=0;i<e.length;i++)if(-1!==e[i].indexOf("pushadsinline")){var n=e[i].split("-");if($box=$("#box"+n[1]),$box.length){$items=$box.find("> div ul li");for(var r=0,s=1;s<a.length+1;s++)$current=$items.eq(n[2]*s-1).length?$items.eq(n[2]*s-1):$box.find("> div ul li:last"),$current.after(a[r]),r++;t.remove()}}}))},randomAd:function(){$(".ads-random").length&&$.each($(".ads-random"),(function(){if(void 0!==$(this).attr("data-conf"))for(var t=JSON.parse($(this).attr("data-conf")),e=0;e<t.items;e++)Helpers.selectRandomAd($(this))}))},selectRandomAd:function(t){var e=t.find("ul li").not(":visible"),a=0;$.each(e,(function(){var t=JSON.parse($(this).attr("data-conf"));$(this).attr("data-from",a).attr("data-to",t.chance+a-1),a+=t.chance}));var i=e.last().attr("data-to"),n=Helpers.randomIntFromInterval(0,i);$.each(e,(function(){n>=$(this).attr("data-from")&&n<=$(this).attr("data-to")&&$(this).show(1)}))},galleryAutoStart:function(){if($(".page.item.gallery").length){var t=location.href.split("#")[1];null!=t&&$(".fancybox-thumbs").eq(t-1).length&&window.setTimeout((function(){$(".fancybox-thumbs").eq(t-1).trigger("click")}),200)}},playerAd:function(){cache.playerAdEnabled=!0},hexToRgba:function(t,e){var a=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return a?"rgba("+parseInt(a[1],16)+","+parseInt(a[2],16)+","+parseInt(a[3],16)+","+e+")":"rgba(255,255,255,0)"},adjustColor:function(t,e){return"#"+t.replace(/^#/,"").replace(/../g,(function(t){return("0"+Math.min(255,Math.max(0,parseInt(t,16)+e)).toString(16)).substr(-2)}))},isInView:function(t){var e=$(t),a=$(window).scrollTop(),i=a+$(window).height(),n=e.offset().top,r=n+e.outerHeight(!0);return n>a&&n<i||r>a&&r<i||a>=n&&a<=r||i>=n&&i<=r},fixed_header:function(){$(window).on("scroll",(function(){($("body").hasClass("_md")||$("body").hasClass("_lg"))&&(headerHeight=$("#header").height()-23,$(this).scrollTop()>headerHeight?$("body").addClass("sticky-header"):$("body").removeClass("sticky-header"))}))},map:{alborz:{t:0,id:106,n:"البرز"},ardabil:{t:0,id:86,n:"اردبیل"},"azerbaijan-east":{t:0,id:81,n:"آذربایجان شرقی"},"azerbaijan-west":{t:0,id:85,n:"آذربایجان غربی"},bushehr:{t:0,id:90,n:"بوشهر"},"chaharmahal-bakhriari":{t:0,id:91,n:"چهارمحال و بختیاری"},fars:{t:0,id:93,n:"فارس"},gilan:{t:0,id:88,n:"گیلان"},golestan:{t:0,id:87,n:"گلستان"},hamadan:{t:0,id:104,n:"همدان"},hormozgan:{t:0,id:95,n:"هرمزگان"},ilam:{t:0,id:84,n:"ایلام"},isfahan:{t:0,id:82,n:"اصفهان"},kerman:{t:0,id:98,n:"کرمان"},kermanshah:{t:0,id:102,n:"کرمانشاه"},"khorasan-north":{t:0,id:83,n:"خراسان شمالی"},"khorasan-razavi":{t:0,id:96,n:"خراسان رضوی"},"khorasan-south":{t:0,id:114,n:"خراسان جنوبی"},khuzestan:{t:0,id:92,n:"خوزستان"},"kohgiluye-boyerahmad":{t:0,id:94,n:"کهگیلویه و بویراحمد"},kurdistan:{t:0,id:101,n:"کردستان"},lorestan:{t:0,id:103,n:"لرستان"},markazi:{t:0,id:111,n:"مرکزی"},mazandaran:{t:0,id:89,n:"مازندران"},qazvin:{t:0,id:109,n:"قزوین"},qom:{t:0,id:110,n:"قم"},semnan:{t:0,id:108,n:"سمنان"},"sistan-baluchestan":{t:0,id:97,n:"سیستان و بلوچستان"},tehran:{t:0,id:107,n:"تهران"},yazd:{t:0,id:99,n:"یزد"},zanjan:{t:0,id:100,n:"زنجان"}}};function SportsTables(t){this.options=$.extend(!0,{},{theme:"global",box:".box.sports-table",api:{base:"http://api.getnews.ir/sport/",leagues:"leagues",fixtures:"fixtures",standing:"standing",seasons:"seasons",weeks:"weeks",weeksByLeague:"weeksProxyByLeague",full:"standingAndFixtures",live:"liveFixtures",detail:"fixtureDetail",standingByLeague:"standingProxyByLeague"}},"undefined"!==t?t:{}),this.init=function(){var t=this;$.each($(this.options.box),(function(){var e=$(this);e.hasClass("reloadable")&&(e.find(" > header").find("[data-task=reload]").length||("undefined"==typeof __bootstrapVersion||__bootstrapVersion<4?e.find(" > header").append('<button type="button" data-task="reload"><i class="icon-refresh"></i></button>'):e.find(" > header").append('<button type="button" data-task="reload"><i class="glyphicon-refresh"></i></button>')),setInterval((function(){t.load(e,e.find("[data-service]:first"),!0)}),3e4)),t.load(e,e.find("[data-service]:first"),!0)}))},this.load=function(t,e,a){var i=this;if(void 0!==e.attr("data-service")&&e.attr("data-service").length&&void 0!==e.attr("data-service")&&e.attr("data-service").length){var n=Helpers.loadTemplate(e.attr("data-service"),e.attr("data-type"),t.hasClass("condensed"),this.options);t.find("[data-task=reload]").length&&t.find("[data-task=reload]").stop().fadeOut(150),n.done((function(n){var r=Template7.compile(n),s="table"!==e.attr("data-type"),o=void 0!==e.attr("data-id")&&e.attr("data-id")?"/"+e.attr("data-id"):"",l=i.loadContent(e.attr("data-service"),o,s);l&&l.done((function(n){void 0!==n.fixtures?n.fixtures=i.group(n.fixtures,"matchDate",!1):("fixtures"===e.attr("data-service")&&(n=i.group(n,"matchDate")),"live"===e.attr("data-service")&&(n=i.group(n,"seasonTitle"),i.compareData(n,e.find("> [data-cache]").attr("data-cache")))),void 0!==n.standing&&void 0!==e.attr("data-standing-count")&&e.attr("data-standing-count")&&(n.standing.entries=n.standing.entries.slice(0,e.attr("data-standing-count")));var s=n.constructor===Array?{array:n}:n;s.cache=JSON.stringify(s);var o=r(s);e.html(o).promise().done((function(){a&&e.find("select").trigger("change")})),t.find("[data-task=reload]").length&&t.find("[data-task=reload]").stop().fadeIn(150)}))}))}},this.compareData=function(t,e){return void 0===e||("string"==typeof e&&(e=JSON.parse(e)),$.each(t.data,(function(t){for(var a in this)this[a]!==e.data[t][a]&&(this.diff=!0)}))),t},this.group=function(t,e,a){a=void 0===a||a;for(var i={},n=0;n<t.length;n++)void 0===i[t[n][e]]&&(i[t[n][e]]=[]),i[t[n][e]].push(t[n]);return a?{data:i}:i},this.loadContent=function(t,e,a){if("fixtures"===t&&(void 0===e||!e))return!1;var i=(0===this.options.api[t].indexOf("/")?"":this.options.api.base)+this.options.api[t]+e;return $.ajax({url:i,cache:a})},this.setEventListeners=function(){var t=this,e=this.options.box+" select";$(document).on("change",e,(function(e){var a=$(this),i=$(this).val(),n=a.parents("[data-service]:first").next();n.attr("data-id",i),t.load(a.parents(".box:first"),n,n.is("[data-type=select]"))})),$(document).on("click",this.options.box+" [data-task=reload]",(function(e){e.preventDefault();var a=$(this).parents(".box:first");t.load(a,a.find("[data-service]:first"),!0)})),$(document).on("click",this.options.box+" .fixture-results .details",(function(e){e.preventDefault(),t.loadDetails($(this))})),void 0!==flags.sportsModalHandled&&!1!==flags.sportsModalHandled||Helpers.handleSportsModal()},this.loadDetails=function(t){var e=this,a=$("body");Helpers.loadTemplate("fixture","details",!1,this.options).done((function(i){var n=Template7.compile(i);details=e.loadContent("detail","/"+t.parents("li:first").data("id")),details.done((function(t){$.each(t.eventSet,(function(){this.host=this.team===t.fixture.hostName}));var e=n(t);a.find(".modal.sports-modal").length&&a.find(".modal.sports-modal").remove(),a.append(e).promise().done((function(){a.find(".modal.sports-modal").modal("show")}))}))}))};var e;(e=this).init(),e.setEventListeners()}function Box(t){if(this.methods=void 0!==t?t:[],this.top=function(){$(".box.top").length&&$.each($(".box.top"),(function(){var t=$(this).find(" > .box-content:first ul:first > li");$.each(t,(function(){$(this).find(".desc").length||($(this).find("> h3").wrap('<div class="desc"></div>'),$(this).find("> p").length&&$(this).find("> p").appendTo($(this).find(".desc")),$(this).find("> h4").length&&$(this).find("> h4").prependTo($(this).find(".desc")),$(this).find(".related-box").length&&$(this).find(".related-box").appendTo($(this).find(".desc")))}))}))},this.ticker=function(){$(".box.ticker").length&&window.setInterval((function(){var t=$(".box.ticker > div ul");t.find("li:first").slideUp(500,(function(){$(this).appendTo(t).slideDown(1)}))}),5e3)},this.rss=function(){$(".box.has-rss").length&&$(".box.has-rss").each((function(){if(void 0!==$(this).attr("data-conf")){var t=JSON.parse($(this).attr("data-conf")).rssUrl;if(""!==$.trim(t)){var e='<a href="'+t+'" target="_blank"><i class="glyphicon-rss"></i></a>';$(this).find(".box-title .box-header-tools").length?$(this).find(".box-title .box-header-tools").append(e):$(this).find(".box-title").append('<div class="box-header-tools">'+e+"</div>")}}}))},this.placeholder=function(){$("article br[data-type]").length&&$("article br[data-type]").each((function(){var t=$(this);switch(t.attr("data-type")){case"related":$(".box.related-items").insertAfter(t),t.remove();break;default:$(".box.box-inline").length&&$(".box.box-inline").each((function(){var t=$(this),e=void 0!==t.attr("data-conf")?Helpers.parseJson(t.attr("data-conf")):{};void 0!==e.tabGroup&&$('br[data-type="'+e.tabGroup+'"]').length&&t.insertAfter('br[data-type="'+e.tabGroup+'"]').promise().done((function(){t.removeClass("box-inline")}))}))}}))},this.carousel=function(){$(".desc-overlay").each((function(){$(this).hasClass("cols")?Carousel.handleDescription($(this),!0):Carousel.handleDescription($(this))})),Carousel.init()},this.slickCarousel=function(){$(".has-carousel").length&&SlickCarousel.init()},this.tab=function(){$(".box.has-tabs").length&&Tabs.init()},this.row=function(){$(".box.wrap-row").length&&Rows.init()},this.hasmore=function(){$(".box.has-more").length&&$(".box.has-more").each((function(){var t=$(this).find("> header").find("h2"),e="object"==typeof i18n&&void 0!==i18n[__lang]?i18n[__lang].MORE:$(this).hasClass("has-more-default")?"بیشتر":t.text(),a='<a class="more" href="'+t.find("a").attr("href")+'">'+e+"</a>";$(this).hasClass("has-more-bottom")?$(this).find("footer").length?$(this).find("footer").append(a):$(this).append("<footer>"+a+"</footer>"):t.parents("header:first").append(a)}))},this.map=function(){function t(){var t=$(".map-wrapper .iran .list").height(),e=$(".map-wrapper .iran .list").width();t>e?$(".map-wrapper .iran svg").height(e).width(e):$(".map-wrapper .iran svg").height(t).width(t)}$(window).resize((function(){t()})),t(),$(".map-wrapper .iran svg g path").hover((function(){var t=$(this).attr("class"),e=$(this).parent("g").attr("class"),a=$(this).attr("data-title");a&&($(".map-wrapper .iran .list ."+e+" ."+t+" a").addClass("hover"),$(".map-wrapper .iran .show-title").html(a).css({display:"block"}))}),(function(){$(".map-wrapper .iran .list a").removeClass("hover"),$(".map-wrapper .iran .show-title").html("").css({display:"none"})})),$(".map-wrapper .iran .list ul li ul li a").hover((function(){var t=$(this).parent("li").attr("class"),e=".map-wrapper .iran svg g."+$(this).parent("li").parent("ul").parent("li").attr("class")+" path."+t,a=$(e).attr("class");$(e).attr("class",a+" hover")}),(function(){var t=$(this).parent("li").attr("class"),e=".map-wrapper .iran svg g."+$(this).parent("li").parent("ul").parent("li").attr("class")+" path."+t,a=$(e).attr("class");$(e).attr("class",a.replace(" hover",""))})),$(".map-wrapper .iran").mousemove((function(t){var e=0,a=0;if(!t)t=window.event;if(t.pageX||t.pageY?(e=t.pageX,a=t.pageY):(t.clientX||t.clientY)&&(e=t.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,a=t.clientY+document.body.scrollTop+document.documentElement.scrollTop),$(".map-wrapper .iran .show-title").html()){var i=$(this).offset(),n=e-i.left+25+"px",r=a-i.top-5+"px";$(".map-wrapper .iran .show-title").css({left:n,top:r})}}))},this.map2=function(){$(".map .iran").length&&$(".map .iran").each((function(){var t=$(this);$.get(__baseResourcePath+"global/img/map/iran.svg",(function(e){t.html(e).promise().done((function(){window.setTimeout((function(){t.find("#provinces path[id]").each((function(){if(void 0!==Helpers.map[$(this).attr("id")].n)try{$(this).attr("data-title",Helpers.map[$(this).attr("id")].n).attr("data-topic",Helpers.map[$(this).attr("id")].id)}catch(t){console.log(t,$(this))}})),$("path[data-title]").nTooltip({container:"svg"})}),1e3)}))}),"text")}))},this.commentRatings=function(){var t=$(".comment-list").length>0?".comment-list":".comments-list";$(document).on("click",t+" .rate",(function(t){var e=$(this),a=e.hasClass("plus")?1:-1,i=e.parents("li:first").attr("data-id"),n="commentRating"in Storage.data?Storage.data.commentRating:null;n=null!==n&&void 0!==n[parseInt(i)]?n[parseInt(i)]:null,Math.abs(n)!==Math.abs(a)&&($.ajax({type:"POST",url:"/rest/postCommentVote",data:"commentId="+i+"&vote="+a,success:function(t){t>0&&e.text(t),Storage.add("commentRating",parseInt(i),a)},error:function(){}}),t.preventDefault())}))},this.scroll=function(){"undefined"!=typeof SimpleBar&&$(".has-scroll").each((function(){new SimpleBar($(this).find("> div ul:first")[0],{autoHide:!1})}))},this.fixedPlayer=function(){Global.set("fixed-player",!0),$(window).on("scroll",(function(){$(".video-played").length&&(Helpers.isInView(".video-played")?$(".video-played").removeClass("fixed"):$(".video-played").addClass("fixed"))}))},$("form.has-selected").each((function(){$(this).find("select").each((function(){$(this).find("option").filter("[data-selected=selected]").attr("selected","selected"),$(this).find("option").filter("[data-disabled=disabled]").attr("disabled","disabled")}))})),$(".archive-fileds select.form-control, .search-form select.form-control, #advanced-fields select.form-control").length){var e=$("body").hasClass("ltr")?"ltr":"rtl",a=$("select.form-control[data-keep-open=true]").select2({dir:e,closeOnSelect:!1});a.is(":visible")&&(a.on("select2:closing",(function(t){t.preventDefault()})).on("select2:closed",(function(t){listColor.select2("open")})).on("select2:selecting",(function(t){console.log(t)})),a.select2("open")),$("select.form-control:not([data-keep-open=true])").select2({dir:e}),$(":input[data-submit-onchange=true]").on("change",(function(){this.form.submit()}))}$("#dateRange").change((function(t,e){$rangeInputs=$(".date-range-inputs"),"custom"===$(this).val()?($rangeInputs.find("input[disabled]").prop("disabled",!1),$rangeInputs.removeClass("hidden"),$rangeInputs.slideDown()):($rangeInputs.find("input[type=text]").prop("disabled",!0),$rangeInputs.addClass("hidden"),$rangeInputs.slideUp())})),$("form.search-form .search-button").on("click",(function(t){$("#searchpi").remove()})),$("form.search-form .advanced").on("click",(function(t){var e=$("form.has-selected #advanced");window.setTimeout((function(){$("#advanced-fields").is(":visible")?e.val("1"):e.val("0")}),1e3)})),this.lazyPlayer=function(){$(".box.lazy-player li.video").each((function(){var t=$(this);t.find("> figure a").one("click",(function(e){if(void 0===t.attr("data-conf"))return!1;if(e.preventDefault(),!t.hasClass("has-player")){t.addClass("has-player");var a=JSON.parse(t.attr("data-conf")),i=t.find("> figure a").attr("id","media_"+uuid++);void 0===flags.cachedPlayer&&(flags.cachedPlayer={}),flags.cachedPlayer[i.attr("id")]=i[0].outerHTML;var n={image:i.find("img").attr("src"),file:a.mediaUrl};"string"!=typeof a.mediaUrl&&(n.sources=a.mediaUrl,n.file=a.mediaUrl[0].file);var r=Player.generatePlayerConfig(!0,n),s=Player.render(i.attr("id"),r);return i.parents("ul:first").hasClass("slick-initialized")&&i.parents("ul:first").slick("slickPause"),s.on("ready",(function(){t.addClass("playing"),Helpers.countVisit(a.newsId,"video")})),!1}}))}))},this.gallery=function(t){t=void 0!==t?t:{};var e=$.extend({},t,{helpers:{title:{type:"inside"},overlay:{css:{background:"rgba(0, 0, 0, 0.5)"}},thumbs:{width:75,height:75}}});$(".fancybox-thumbs").length&&$(".fancybox-thumbs").fancybox(e)},this.gallery2=function(t){t=void 0!==t?t:{};var e=$.extend({},t,fancyBoxDefaultOptions,{thumbs:{autoStart:!0,axis:"x"}});if($(".fancybox-thumbs").length){$(".fancybox-thumbs").each((function(){$(this).attr("data-fancybox","gallery")}));try{$(".fancybox-thumbs").fancybox(e)}catch(t){console.log("Error Initializing Fancybox!")}}},this.prayers=function(){$(".box.prayer-times").length&&Helpers.loadTemplate("prayers","",!1,{theme:"global"}).done((function(t){var e=Template7.compile(t)(void 0!==Global.get("default-city")?{value:Global.get("default-city"),field:"data-value"}:{});$(".box.prayer-times > div").html(e).promise().done((function(){prayTimes.setMethod("Tehran");var t=$(".box.prayer-times select:first"),e=t.val().split(","),a=prayTimes.getTimes(new Date,[e[0],e[1]],3.5);for(var i in a)a[i]=a[i].toPersianDigits();Helpers.setPrayerTimes(a),$(document).on("change",".box.prayer-times select:first",(function(e){var a=t.val().split(","),i=prayTimes.getTimes(new Date,[a[0],a[1]],3.5);for(var n in i)i[n]=i[n].toPersianDigits();Helpers.setPrayerTimes(i)}))}))}))},this.floatingAd=function(){$(".floating-ad").length&&($.each($(".floating-ad"),(function(){var t=$(this),e=t.attr("id");window.setTimeout((function(){("hidden"!==$.parseJSON($.cookie("floating-ad_"+e))||t.hasClass("permanent"))&&t.fadeIn("fast")}),300)})),$(".floating-ad").click((function(t){var e=$(this).attr("id");t.target===this&&$(".floating-ad").fadeOut("fast",(function(){this.hasClass("permanent")||$.cookie("floating-ad_"+e,JSON.stringify("hidden"),72e5)}))})))},this.sportTables=function(){new SportsTables};var i;i=this,debug&&console.log("Requested methods: "+i.methods),i.commentRatings(),$.each(i.methods,(function(e){void 0!==i[t[e]]&&i[t[e]]()}))}function Comments(){this.initCommentForm=function(){$(".comment-form form").each((function(t){var e=$(this),a=e.find(".msg");e.find("#btnSave").click((function(t){console.log("comment save"),t.preventDefault();var i=e.find(":input:visible"),n=$(this),r=!1;return e.find("input,textarea").each((function(t){var a=$(this).val().trim();$(this).attr("required")&&""==a&&(r=!0,e.find(".msg").addClass("text-error").text($(this).attr("data-required-msg")).show(),$(this).focus())})),r||($.ajax({url:e.attr("data-url"),type:"post",data:e.serialize(),success:function(t){Helpers.randomCaptchaKey(t.captchaKey);var r=void 0!==t.ok?t.ok:t;"1"==r?(a.removeClass("text-error").addClass("text-success").text(e.attr("data-success")).show(),i.attr("disabled","disabled"),n.attr("disabled","disabled")):"2"==r?a.removeClass("text-success").addClass("text-error").text(e.attr("data-captcha-error")).show():(a.removeClass("text-success").addClass("text-error").text(e.attr("data-error")).show(),i.attr("disabled","disabled"),n.attr("disabled","disabled")),a.slideDown(),$(".comment-info .alert .close").trigger("click")}}),e.find("input,textarea").on("focusin",(function(){a.is(":hidden")&&a.slideUp(),a.html("").removeClass("alert-success").removeClass("alert-danger")}))),!1}))}))},this.initGoToCommentForm=function(){$(".insert-comment").click((function(){if(location.pathname.replace(/^\//,"")===this.pathname.replace(/^\//,"")&&location.hostname===this.hostname){var t=$(this.hash);if((t=t.length?t:$("[name="+this.hash.slice(1)+"]")).length)return $("html,body").animate({scrollTop:t.offset().top},1e3),!1}}))},this.initReplyHandler=function(){$(document).on("click",".reply-button a",(function(t){t.preventDefault();var e=$(this).parents("li:first"),a=$(".box.comment-form form:first"),i=a.find(".comment-info .alert"),n=e.attr("data-id");i.find(" > span").text(e.find(".author:first").text()),i.find("blockquote").text(e.find("p:first").text()),i.hasClass("fade")?i.addClass("in").removeClass("hide"):i.slideDown(),a.find("input[name=reply]").attr("value",1),a.find("input[name=parentId]").attr("value",n),$("html,body").animate({scrollTop:a.offset().top-100})})),$(document).on("click",".comment-form .alert button",(function(t){$(this).parent().hasClass("in")?$(this).parent().removeClass("in").addClass("hide"):$(this).parent().slideUp();var e=$(this).parents("form:first");e.find("input[name=reply]").attr("value",0),e.find("input[name=reply-id]").attr("value",0)}))};var t;t=this,$(".comment-form").length&&(t.initCommentForm(),t.initGoToCommentForm(),t.initReplyHandler())}function Item(t,e){this.handleVideos=void 0!==t&&t,this.initPlayer=void 0===e||e,this.initTools=function(){function t(t){var e=$(".content-full-news"),a=parseInt(e.css("font-size"));"increase"===t?a+=1:"decrease"===t?a-=1:a=15,e.css("font-size",a)}$("#increase").click((function(){t("increase")})),$("#decrease").click((function(){t("decrease")})),$("#reset").click((function(){t("reset")}))},this.initInlineGallery=function(){if($(".gallery-placeholder").length&&$(".gallery.hidden").length){var t=$(".gallery.hidden figure"),e=0;$(".gallery-placeholder").each((function(){for(var a=$(this),i=a.attr("data-count"),n="",r=0;r<i;r++)r+e<t.length&&(n+=t[r+e].outerHTML);e+=parseInt(i),a.replaceWith('<div class="gallery">'+n+"</div>")}))}},this.handleItemVideo=function(){if($(".item-body .itemPlayer0").length){var t=$("article .item-body .itemPlayer0").detach(),e=$("article [itemprop=description]");e.length&&e.find("figure.item-img").length?(e.find("figure.item-img").hide(),t.insertBefore(e)):$("article .item-img").length?($(".item-img").hide(),t.insertBefore(".item-img")):t.appendTo("article .item-body")}};var a;(a=this).handleVideos&&a.handleItemVideo(),a.initTools(),Helpers.countVisit(),a.initInlineGallery(),a.initPlayer&&Player.init(),new Comments}function IsEmailValid(t){return""!=t.trim()&&/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(t.trim())}!function(t){Storage.init(),t.fn.nTooltip=function(e){var a=this;t(document).mousemove((function(t){mouse.x=t.pageX,mouse.y=t.pageY})),!t(".tooltip").length&&t("body").append('<div class="tooltip"></div>');var i=t.extend({container:"body"},e);return t(document).on("mouseenter",t(a[0]).prop("tagName"),(function(){void 0!==t(this).attr("data-title")&&t(".tooltip").text(t(this).attr("data-title")).stop().fadeIn(100)})),t(document).on("mousemove",i.container,(function(e){t(".tooltip").css({top:mouse.y+15,left:mouse.x+10}),t(e.target).is(a)&&void 0!==t(e.target).attr("data-title")||t(".tooltip").text("").stop().fadeOut(50)})),this};var e=window.location.host.replace(/\./g,"")+"_responsive";t.cookie(e)&&""!==t.cookie(e)&&Responsive.toggleVersions(t.cookie(e))}(jQuery),$((function(){if($("#frmNewsArchive").length){function t(){var t=(-1!=location.href.indexOf("/marchive")||-1!=location.href.indexOf("/mediaArchive")?"/m":"/")+"archive?pi=1";$("#topic").val()>0&&(t+="&tp="+$("#topic").val()),$("#newsType").val()>0&&(t+="&ty="+$("#newsType").val()),($("#place").val()>0||$("#pl").val())&&(t+="&pl="+($("#place").val()>0?$("#place").val():$("#pl").val())),$("#keyword").val()&&(t+="&kw="+$("#keyword").val()),$("#jr").val()&&(t+="&jr="+$("#jr").val()),""!=$("#all").val()&&(t+="&all="+$("#all").val()),""!=$("#ni").val()&&(t+="&ni="+$("#ni").val()),""!=$("#nl").val()&&(t+="&nl="+$("#nl").val()),""!=$("#mosaic").val()&&(t+="&ms="+$("#mosaic").val()),""!=$("#ps").val()&&(t+="&ps="+$("#ps").val()),$("#toDay").val()>0&&(t+="&dy="+$("#toDay").val()),$("#toMonth").val()>0&&(t+="&mn="+$("#toMonth").val()),$("#toYear").val()>0&&(t+="&yr="+$("#toYear").val()),$("#doFindNews").attr("href",t)}t(),$("#topic,#newsType,#place,#toDay,#toMonth,#toYear").change((function(){t(),location.href=$("#doFindNews").attr("href")}))}$("#frmSubscription").length&&($("input[name='newsletter_id']").change((function(){nl_id=$('input[name="newsletter_id"]:checked').val(),nl_md=$('input.NLMedium[alt="'+nl_id+'"]').val(),$(".reqCell").hide(),$(".reqEmail").hide(),"1"==nl_md?($(".reqEmail").show(),$("#cell").attr("required",null),$("#email").attr("required","true")):"2"==nl_md&&($(".reqCell").show(),$("#email").attr("required",null),$("#cell").attr("required","true"))})),$("input[name='newsletter_id']:first").click(),$("input[name='newsletter_id']").change()),$(".btnScr").click((function(){ds=$(this),ds.append(spinner),cid=$(this).attr("rel"),vote=$(this).hasClass("ps")?1:-1,voteSel=1==vote?"ps":"ng",$.ajax({type:"GET",url:"/rest/postCommentVote?commentId="+cid+"&vote="+vote,async:!1,cache:!1,success:function(t){t>0?(ds.find(".pn").text(t),ds.attr("atitle","قبلاً امتیاز داده‌اید‍")):"-2"==t?ds.attr("atitle","قبلاً امتیاز داده‌اید‍"):(ds.find(".pn").text("X"),ds.attr("atitle","اشکال در درج امتیاز"))},error:function(){ds.find(".pn").text("X"),ds.children(".icon-spinner").hide(300).remove()}}),ds.children(".icon-spinner").hide(300).remove()})),$(".box.poll").length&&$.each($(".box.poll"),(function(){var t=$(this),e=t.find("[type=radio]:first").attr("name").split("-")[1];void 0!==Storage.data.poll&&void 0!==Storage.data.poll[e]&&(t.find("input[type=button]").prop("disabled",!0),t.find("input[type=radio]").prop("disabled",!0),t.find("input[type=radio][id="+Storage.data.poll[e]+"]").prop("checked",!0),t.find(".percent.hidden").removeClass("hidden"),t.find(".vote-btn").remove())})),$(document).on("click",".box.poll input[type=button]",(function(t){var e=$(this).parents(".box:first").find("input[type=radio]:checked"),a={item:e.attr("id"),poll:e.attr("name").split("-")[1]},i="poll"in Storage.data?Storage.data.poll:null;i=null!==i&&void 0!==i[parseInt(a.poll)]?i[parseInt(a.poll)]:null,Storage.add("poll",parseInt(a.poll),a.item)})),$("input.vote-btn").click((function(){var t=$(this),e=$(this).parents(".poll-box"),a=e.find("input:checked");a.length<=0||$.ajax({type:"POST",url:"/rest/vote?poid="+a.attr("id"),cache:!1,success:function(a){t.remove(),e.find(":radio").attr("disabled",!0),e.find(".percent.hidden").removeClass("hidden")},error:function(){}})})),$("#frmSearchNews #btnAdvSearch").click((function(){$("#frmSearchNews #divAdvSearch").toggle(500);var t=$("#frmSearchNews #advanced");"1"==t.val()?(t.val("0"),$("#divAdvSearch select").prop("disabled",!0)):(t.val("1"),$("#divAdvSearch select").prop("disabled",!1))})),$("#frmSearchNews #btnDoSearch").submit((function(){var t=$("#frmSearchNews #txtQuery").val();return""!=t&&t!=$("#frmSearchNews #txtQuery").attr("placeholder")||($("#frmSearchNews #txtQuery").focus(),!1)})),$(".toggle-versions").on("click","a",(function(t){Responsive.toggleVersions($(this).attr("id").replace("-version","")),t.preventDefault()})),$("form[data-url]").not(".comment-form form").each((function(t){var e=$(this),a="#"+$(this).attr("id");$(e).find("#btnSave").click((function(t){console.log("subscription save"),t.preventDefault();var i=$(this);i.parent().append(spinner);var n=!1;if($(a+" input,"+a+" textarea").each((function(t){var a=$(this).val().trim();$(this).attr("required")&&""==a&&(n=!0,$(e).find(".msg").addClass("text-error").text($(this).attr("data-requiredmsg")).show(),$(this).focus()),null==$(this).attr("data-emailvalidation")||"true"!=$(this).attr("data-emailvalidation")||""==a||IsEmailValid(a)||(n=!0,$(e).find(".msg").addClass("text-error").text("لطفا‍‍ً رایانامه خود را به درستی وارد کنید!").show(),$(this).focus())})),!n){var r=$(e).serialize(),s=$(e).attr("data-url");$.post(s,r,(function(t){if("1"==t){var n=$(e).attr("data-success");$(e).find(".msg").removeClass("text-error").addClass("text-success").text(n).show(),i.attr("disabled","disabled")}else if("2"==t){n=$(e).attr("data-captcha-error");$(e).find(".msg").removeClass("text-success").addClass("text-error").text(n).show()}else{n=$(e).attr("data-error");$(e).find(".msg").removeClass("text-success").addClass("text-error").text(n).show(),$("#btnSave,"+a+" input,"+a+" textarea").attr("disabled","disabled")}}),"json")}return $(this).parent().children(".icon-spinner").hide(300).remove(),!1}))})),$(".box .mediaplayer").each((function(){var t=$(this);t.is("[id]")||t.attr("id","mediaplayer_"+uuid++),t.is("[data-conf]")&&(vconf=JSON.parse(t.attr("data-conf")),jwplayer(t.attr("id")).setup({file:vconf.mediaUrl,image:vconf.poster,width:"100%",aspectratio:"16:9"}))})),$(".short-link-container").click((function(t){var e=$(".short-link-container").find(".form-group:first");if(!e.find(".copied").length){var a="object"==typeof i18n&&void 0!==i18n[__lang]&&void 0!==i18n[__lang].COPIED?i18n[__lang].COPIED:"کپی شد",i="display: none; width: 100%; height: 100%; position: absolute; top: 0; left: 0; background: #ddd; text-align: center;",n='<div class="copied" style="'+(i+="line-height: "+e.height()+"px;")+'">'+a+"</div>";e.css({position:"relative"}),e.append(n)}t.preventDefault(),$(this).find("input").select();try{document.execCommand("copy"),e.find(".copied").fadeIn(300),window.setTimeout((function(){e.find(".copied").fadeOut(300)}),1e3)}catch(t){console.log(t)}})),$(".ads .auto-height").length&&$(".ads .auto-height").each((function(){var t=$(this).parent().width();$(this).height(t/$(this).data("ratio"))}))}));var Player={init:function(){$("article video,article audio").each((function(){var t=$(this),e=Global.get("player")?Global.get("player"):"undefined"!=typeof jwplayer?"jwplayer":"videojs";t.is("[id]")||t.attr("id","media_"+uuid++),t.is("[src]")&&0==t.children("source").length&&t.append('<source src="'+t.attr("src")+'" />');var a=t.find("source:first").attr("src"),i=t.attr("poster")||null,n=Player.createPlaylist(t,e);if(-1===a.indexOf(".mp3")){var r=Player.generatePlayerConfig("true"==t.attr("data-autoplay"),n,e,null);if(r.poster=i,void 0!==cache.playerAdEnabled&&cache.playerAdEnabled&&$(".box.player-ad").length&&$(".box.player-ad").find("li[data-conf]").length){var s=Player.getAdConfig();Player.handleAd(t.attr("id"),s,(function(){r.autostart=!0;Player.render(t.attr("id"),r,e)}))}else Player.render(t.attr("id"),r,e)}else{if($(this).is("[width]")&&$(this).is("[height]"))var o={width:t.attr("width"),height:t.attr("height"),autostart:"true"==t.attr("data-autoplay"),playlist:[n],preload:"metadata",base:__baseResourcePath+"global/js/jwplayer-8.6.3"};else o={width:"100%",autostart:"true"==t.attr("data-autoplay"),playlist:[n],preload:"metadata",base:__baseResourcePath+"global/js/jwplayer-8.6.3"};null==i&&0==$(this).attr("id").indexOf("divPlayer")?o.height="40px":o.aspectratio="4:3",jwplayer(t.attr("id")).setup(o)}}))},createPlaylist:function(t,e){var a=t.find("source:first").attr("src"),i={image:t.attr("poster")||null,sources:[]};return t.attr("data-source")?i.sources=JSON.parse(t.attr("data-source")):t.find("source").length>1?$(t.find("source")).each((function(t){var e=$(this).attr("src");try{var a=e.substring(e.lastIndexOf("_")+1,e.length-4)}catch(e){a=t+1}i.sources.push({file:$(this).attr("src"),label:a})})):i.file=a,i},createLazyPlaylist:function(t){},generatePlayerConfig:function(t,e,a,i){var n={width:"100%",aspectratio:"4:3",stretching:"uniform",autostart:!!t&&"viewable",debug:!0,poster:"",primary:"flash",related:!1,ph:1,playbackRateControls:!0,preload:"metadata",base:__baseResourcePath+"global/js/jwplayer-8.6.3/",flashplayer:"/global/js/jwplayer-8.6.3/jwplayer.flash.swf",fluid:!0,aspectRatio:"4:3",autoplay:!!t&&"any",techOrder:["html5","flash"]};if(void 0!==e.sources&&e.sources.length>0)switch(a){default:case"jwplayer":n.playlist=[e];break;case"videojs":n.src=[],videojs&&(videojs.options.flash.swf=__baseResourcePath+"global/js/videojs/video-js.swf"),e.sources.forEach((function(t){var e={src:t.file,type:t.file.endsWith(".flv")?"video/x-flv":"video/mp4",label:t.label};void 0!==t.default&&t.default&&(e.selected=!0),n.src.push(e)})),n.controlBar={children:["playToggle","progressControl","volumePanel","fullscreenToggle"]}}else n.poster=e.image,n.file=e.file,n.src=e.file;return n},getAdConfig:function(){return JSON.parse($(".box.player-ad:first").find("li[data-conf]").attr("data-conf"))},render:function(t,e,a){var i={};switch(a){default:case"jwplayer":console.log(e),jwplayer.base=__baseResourcePath+"global/js/jwplayer-8.6.3/",i=jwplayer(t).setup(e);break;case"videojs":e.src.length>1&&(e.plugins={videoJsResolutionSwitcher:{default:"low",dynamicLabel:!0}}),i=$("#"+t).addClass("video-js")&&videojs(t,e,(function(){e.src.length>1&&this.updateSrc(e.src)}))}return window.player=i,Global.get("fixed-player")&&(i.on("play",(function(){var e=$("#"+t).height();$("#"+t).parent().addClass("video-played").height(e)})),i.on("complete",(function(){$("#"+t).parent().removeClass("video-played").height("auto")}))),i},handleAd:function(t,e,a){var i=$("#"+t),n=i.clone(!0);i.wrap('<div id="ad-holder"></div>'),i.removeProp("autoplay").removeProp("control");var r='<section class="box pre-video-ad desc-overlay hidden-desc img-4-3"><div><ul><li>\n\t\t\t\t\t<figure><a href="{href}" target="_blank">';r+="image"===e.type?'<img src="{src}" />':'<video src="{src}" class="video-ad" />',r=(r+='</a></figure>\n\t\t\t\t\t<div class="desc"><h3><a href="{href}" target="_blank">{title}</a></h3></div>\n\t\t\t\t\t</li></ul></div><div class="progress"><div class="progress-bar"></div></div></section>').replace(/{href}/g,e.href).replace(/{src}/g,e.src).replace(/{title}/g,e.title),Player.playAd($("#ad-holder"),r,n,e,(function(){"function"==typeof a&&a()})),$(document).on("click",".box.pre-video-ad ul li figure a",(function(t){if($(this).find("video").length&&!$(this).find("video").hasClass("playing"))return t.preventDefault(),!1}))},renderVideoPlayButton:function(t){t.append('                <svg class="video-overlay-play-button" viewBox="0 0 200 200" alt="Play video">                    <circle cx="100" cy="100" r="90" fill="none" stroke-width="15" stroke="#fff"/>                    <polygon points="70, 55 70, 145 145, 100" fill="#fff"/>                </svg>            '),$(document).on("click",".video-overlay-play-button",(function(){t.find("video")[0].play(),$(".video-overlay-play-button").remove()}))},playAd:function(t,e,a,i,n){t.html(e.replace(/{href}/,i.href).replace(/{src}/,i.src));var r="video"===i.type?"video":"img",s="video"===i.type?"play":"load";"video"===i.type&&Player.renderVideoPlayButton(t.find(r).parent()),t.find(r).on("error ended stalled",(function(){Player.afterAd(t,a,n)})),t.find(r).on(s,(function(){$(".video-ad").length&&$(".video-ad").addClass("playing"),t.find(".hidden-desc").removeClass("hidden-desc");var e=t.find(".progress-bar"),r=0,s=window.setInterval((function(){var o=100*r/i.duration;o>100&&(window.clearInterval(s),"image"===i.type?Player.afterAd(t,a,n):$(".pre-video-ad").append('<a   routerLink="/Home" class="skip-ad">رد تبلیغ</a>').promise().done((function(){$(document).on("click",".skip-ad",(function(e){e.preventDefault(),Player.afterAd(t,a,n)}))}))),e.css({width:o+"%"}),r+=100}),100)}))},afterAd:function(t,e,a){t.replaceWith(e),"function"==typeof a&&a()}};function PrayTimes(t){var e,a,i,n,r,s={MWL:{name:"Muslim World League",params:{fajr:18,isha:17}},ISNA:{name:"Islamic Society of North America (ISNA)",params:{fajr:15,isha:15}},Egypt:{name:"Egyptian General Authority of Survey",params:{fajr:19.5,isha:17.5}},Makkah:{name:"Umm Al-Qura University, Makkah",params:{fajr:18.5,isha:"90 min"}},Karachi:{name:"University of Islamic Sciences, Karachi",params:{fajr:18,isha:18}},Tehran:{name:"Institute of Geophysics, University of Tehran",params:{fajr:17.7,isha:14,maghrib:4.5,midnight:"Jafari"}},Jafari:{name:"Shia Ithna-Ashari, Leva Institute, Qum",params:{fajr:16,isha:14,maghrib:4,midnight:"Jafari"}}},o="MWL",l={imsak:"10 min",dhuhr:"0 min",asr:"Standard",highLats:"NightMiddle"},d="24h",c=["am","pm"],u={},f={maghrib:"0 min",midnight:"Standard"};for(var h in s){var p=s[h].params;for(var m in f)void 0===p[m]&&(p[m]=f[m])}p=s[o=s[t]?t:o].params;for(var v in p)l[v]=p[v];for(var h in{imsak:"Imsak",fajr:"Fajr",sunrise:"Sunrise",dhuhr:"Dhuhr",asr:"Asr",sunset:"Sunset",maghrib:"Maghrib",isha:"Isha",midnight:"Midnight"})u[h]=0;return{setMethod:function(t){s[t]&&(this.adjust(s[t].params),o=t)},adjust:function(t){for(var e in t)l[e]=t[e]},tune:function(t){for(var e in t)u[e]=t[e]},getMethod:function(){return o},getSetting:function(){return l},getOffsets:function(){return u},getDefaults:function(){return s},getTimes:function(t,s,o,l,c){return e=1*s[0],a=1*s[1],i=s[2]?1*s[2]:0,d=c||d,t.constructor===Date&&(t=[t.getFullYear(),t.getMonth()+1,t.getDate()]),void 0!==o&&"auto"!=o||(o=this.getTimeZone(t)),void 0!==l&&"auto"!=l||(l=this.getDst(t)),n=1*o+(1*l?1:0),r=this.julian(t[0],t[1],t[2])-a/360,this.computeTimes()},getFormattedTime:function(t,e,a){if(isNaN(t))return"-----";if("Float"==e)return t;a=a||c,t=DMath.fixHour(t+.5/60);var i=Math.floor(t),n=Math.floor(60*(t-i)),r="12h"==e?a[i<12?0:1]:"";return("24h"==e?this.twoDigitsFormat(i):(i+12-1)%12+1)+":"+this.twoDigitsFormat(n)+(r?" "+r:"")},midDay:function(t){var e=this.sunPosition(r+t).equation;return DMath.fixHour(12-e)},sunAngleTime:function(t,a,i){var n=this.sunPosition(r+a).declination,s=this.midDay(a),o=1/15*DMath.arccos((-DMath.sin(t)-DMath.sin(n)*DMath.sin(e))/(DMath.cos(n)*DMath.cos(e)));return s+("ccw"==i?-o:o)},asrTime:function(t,a){var i=this.sunPosition(r+a).declination,n=-DMath.arccot(t+DMath.tan(Math.abs(e-i)));return this.sunAngleTime(n,a)},sunPosition:function(t){var e=t-2451545,a=DMath.fixAngle(357.529+.98560028*e),i=DMath.fixAngle(280.459+.98564736*e),n=DMath.fixAngle(i+1.915*DMath.sin(a)+.02*DMath.sin(2*a)),r=(DMath.cos(a),DMath.cos(2*a),23.439-36e-8*e),s=DMath.arctan2(DMath.cos(r)*DMath.sin(n),DMath.cos(n))/15,o=i/15-DMath.fixHour(s);return{declination:DMath.arcsin(DMath.sin(r)*DMath.sin(n)),equation:o}},julian:function(t,e,a){e<=2&&(t-=1,e+=12);var i=Math.floor(t/100),n=2-i+Math.floor(i/4);return Math.floor(365.25*(t+4716))+Math.floor(30.6001*(e+1))+a+n-1524.5},computePrayerTimes:function(t){t=this.dayPortion(t);var e=l;return{imsak:this.sunAngleTime(this.eval(e.imsak),t.imsak,"ccw"),fajr:this.sunAngleTime(this.eval(e.fajr),t.fajr,"ccw"),sunrise:this.sunAngleTime(this.riseSetAngle(),t.sunrise,"ccw"),dhuhr:this.midDay(t.dhuhr),asr:this.asrTime(this.asrFactor(e.asr),t.asr),sunset:this.sunAngleTime(this.riseSetAngle(),t.sunset),maghrib:this.sunAngleTime(this.eval(e.maghrib),t.maghrib),isha:this.sunAngleTime(this.eval(e.isha),t.isha)}},computeTimes:function(){for(var t={imsak:5,fajr:5,sunrise:6,dhuhr:12,asr:13,sunset:18,maghrib:18,isha:18},e=1;e<=1;e++)t=this.computePrayerTimes(t);return(t=this.adjustTimes(t)).midnight="Jafari"==l.midnight?t.sunset+this.timeDiff(t.sunset,t.fajr)/2:t.sunset+this.timeDiff(t.sunset,t.sunrise)/2,t=this.tuneTimes(t),this.modifyFormats(t)},adjustTimes:function(t){var e=l;for(var i in t)t[i]+=n-a/15;return"None"!=e.highLats&&(t=this.adjustHighLats(t)),this.isMin(e.imsak)&&(t.imsak=t.fajr-this.eval(e.imsak)/60),this.isMin(e.maghrib)&&(t.maghrib=t.sunset+this.eval(e.maghrib)/60),this.isMin(e.isha)&&(t.isha=t.maghrib+this.eval(e.isha)/60),t.dhuhr+=this.eval(e.dhuhr)/60,t},asrFactor:function(t){return{Standard:1,Hanafi:2}[t]||this.eval(t)},riseSetAngle:function(){return.833+.0347*Math.sqrt(i)},tuneTimes:function(t){for(var e in t)t[e]+=u[e]/60;return t},modifyFormats:function(t){for(var e in t)t[e]=this.getFormattedTime(t[e],d);return t},adjustHighLats:function(t){var e=l,a=this.timeDiff(t.sunset,t.sunrise);return t.imsak=this.adjustHLTime(t.imsak,t.sunrise,this.eval(e.imsak),a,"ccw"),t.fajr=this.adjustHLTime(t.fajr,t.sunrise,this.eval(e.fajr),a,"ccw"),t.isha=this.adjustHLTime(t.isha,t.sunset,this.eval(e.isha),a),t.maghrib=this.adjustHLTime(t.maghrib,t.sunset,this.eval(e.maghrib),a),t},adjustHLTime:function(t,e,a,i,n){var r=this.nightPortion(a,i),s="ccw"==n?this.timeDiff(t,e):this.timeDiff(e,t);return(isNaN(t)||s>r)&&(t=e+("ccw"==n?-r:r)),t},nightPortion:function(t,e){var a=l.highLats,i=.5;return"AngleBased"==a&&(i=1/60*t),"OneSeventh"==a&&(i=1/7),i*e},dayPortion:function(t){for(var e in t)t[e]/=24;return t},getTimeZone:function(t){var e=t[0],a=this.gmtOffset([e,0,1]),i=this.gmtOffset([e,6,1]);return Math.min(a,i)},getDst:function(t){return 1*(this.gmtOffset(t)!=this.getTimeZone(t))},gmtOffset:function(t){var e=new Date(t[0],t[1]-1,t[2],12,0,0,0),a=e.toGMTString();return(e-new Date(a.substring(0,a.lastIndexOf(" ")-1)))/36e5},eval:function(t){return 1*(t+"").split(/[^0-9.+-]/)[0]},isMin:function(t){return-1!=(t+"").indexOf("min")},timeDiff:function(t,e){return DMath.fixHour(e-t)},twoDigitsFormat:function(t){return t<10?"0"+t:t}}}window.Template7=function(){"use strict";function t(t){return"[object Array]"===Object.prototype.toString.apply(t)}function e(t){return"function"==typeof t}var a=new RegExp("'","g"),i=new RegExp('"',"g");function n(t){var e,n,r,s=t.replace(/[{}#}]/g,"").split(" "),o=[];for(n=0;n<s.length;n++){var l,d,c=s[n];if(0===n)o.push(c);else if(0===c.indexOf('"')||0===c.indexOf("'"))if(l=0===c.indexOf('"')?i:a,d=0===c.indexOf('"')?'"':"'",2===c.match(l).length)o.push(c);else{for(e=0,r=n+1;r<s.length;r++)if(c+=" "+s[r],s[r].indexOf(d)>=0){e=r,o.push(c);break}e&&(n=e)}else if(c.indexOf("=")>0){var u=c.split("="),f=u[0],h=u[1];if(l||(l=0===h.indexOf('"')?i:a,d=0===h.indexOf('"')?'"':"'"),2!==h.match(l).length){for(e=0,r=n+1;r<s.length;r++)if(h+=" "+s[r],s[r].indexOf(d)>=0){e=r;break}e&&(n=e)}var p=[f,h.replace(l,"")];o.push(p)}else o.push(c)}return o}var r=function(e,a){var i=this;function r(t,e){return t.content?d(t.content,e):function(){return""}}function s(t,e){return t.inverseContent?d(t.inverseContent,e):function(){return""}}function o(t,e){var a,i,n=0;if(0===t.indexOf("../")){n=t.split("../").length-1;var r=e.split("_")[1]-n;e="ctx_"+(r>=1?r:1),i=t.split("../")[n].split(".")}else 0===t.indexOf("@global")?(e="Template7.global",i=t.split("@global.")[1].split(".")):0===t.indexOf("@root")?(e="root",i=t.split("@root.")[1].split(".")):i=t.split(".");a=e;for(var s=0;s<i.length;s++){var o=i[s];0===o.indexOf("@")?s>0?a+="[(data && data."+o.replace("@","")+")]":a="(data && data."+t.replace("@","")+")":isFinite(o)?a+="["+o+"]":"this"===o||o.indexOf("this.")>=0||o.indexOf("this[")>=0||o.indexOf("this(")>=0?a=o.replace("this",e):a+="."+o}return a}function l(t,e){for(var a=[],i=0;i<t.length;i++)/^['"]/.test(t[i])||/^(true|false|\d+)$/.test(t[i])?a.push(t[i]):a.push(o(t[i],e));return a.join(", ")}function d(e,a){if(a=a||1,"string"!=typeof(e=e||i.template))throw new Error("Template7: Template must be a string");var d=function(e){var a,i,r=[];if(!e)return[];var s=e.split(/({{[^{^}]*}})/);for(a=0;a<s.length;a++){var o=s[a];if(""!==o)if(o.indexOf("{{")<0)r.push({type:"plain",content:o});else{if(o.indexOf("{/")>=0)continue;if(o.indexOf("{#")<0&&o.indexOf(" ")<0&&o.indexOf("else")<0){r.push({type:"variable",contextName:o.replace(/[{}]/g,"")});continue}var l=n(o),d=l[0],c=">"===d,u=[],f={};for(i=1;i<l.length;i++){var h=l[i];t(h)?f[h[0]]="false"!==h[1]&&h[1]:u.push(h)}if(o.indexOf("{#")>=0){var p,m="",v="",g=0,$=!1,b=!1,y=0;for(i=a+1;i<s.length;i++)if(s[i].indexOf("{{#")>=0&&y++,s[i].indexOf("{{/")>=0&&y--,s[i].indexOf("{{#"+d)>=0)m+=s[i],b&&(v+=s[i]),g++;else if(s[i].indexOf("{{/"+d)>=0){if(!(g>0)){p=i,$=!0;break}g--,m+=s[i],b&&(v+=s[i])}else s[i].indexOf("else")>=0&&0===y?b=!0:(b||(m+=s[i]),b&&(v+=s[i]));$&&(p&&(a=p),r.push({type:"helper",helperName:d,contextName:u,content:m,inverseContent:v,hash:f}))}else o.indexOf(" ")>0&&(c&&(d="_partial",u[0]&&(u[0]='"'+u[0].replace(/"|'/g,"")+'"')),r.push({type:"helper",helperName:d,contextName:u,hash:f}))}}return r}(e);if(0===d.length)return function(){return""};var c,u="ctx_"+a,f="";for(f+=1===a?"(function ("+u+", data, root) {\n":"(function ("+u+", data) {\n",1===a&&(f+="function isArray(arr){return Object.prototype.toString.apply(arr) === '[object Array]';}\n",f+="function isFunction(func){return (typeof func === 'function');}\n",f+='function c(val, ctx) {if (typeof val !== "undefined" && val !== null) {if (isFunction(val)) {return val.call(ctx);} else return val;} else return "";}\n',f+="root = root || ctx_1 || {};\n"),f+="var r = '';\n",c=0;c<d.length;c++){var h,p,m=d[c];if("plain"!==m.type){if("variable"===m.type&&(f+="r += c("+(h=o(m.contextName,u))+", "+u+");"),"helper"===m.type)if(m.helperName in i.helpers)p=l(m.contextName,u),f+="r += (Template7.helpers."+m.helperName+").call("+u+", "+(p&&p+", ")+"{hash:"+JSON.stringify(m.hash)+", data: data || {}, fn: "+r(m,a+1)+", inverse: "+s(m,a+1)+", root: root});";else{if(m.contextName.length>0)throw new Error('Template7: Missing helper: "'+m.helperName+'"');f+="if ("+(h=o(m.helperName,u))+") {",f+="if (isArray("+h+")) {",f+="r += (Template7.helpers.each).call("+u+", "+h+", {hash:"+JSON.stringify(m.hash)+", data: data || {}, fn: "+r(m,a+1)+", inverse: "+s(m,a+1)+", root: root});",f+="}else {",f+="r += (Template7.helpers.with).call("+u+", "+h+", {hash:"+JSON.stringify(m.hash)+", data: data || {}, fn: "+r(m,a+1)+", inverse: "+s(m,a+1)+", root: root});",f+="}}"}}else f+="r +='"+m.content.replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/'/g,"\\'")+"';"}return f+="\nreturn r;})",eval.call(window,f)}i.template=e,i.compile=function(t){return i.compiled||(i.compiled=d(t)),i.compiled}};r.prototype={options:{},partials:{},helpers:{_partial:function(t,e){var a=r.prototype.partials[t];if(!a||a&&!a.template)return"";a.compiled||(a.compiled=new r(a.template).compile());for(var i in e.hash)this[i]=e.hash[i];return a.compiled(this,e.data,e.root)},escape:function(t,e){if("string"!=typeof t)throw new Error('Template7: Passed context to "escape" helper should be a string');return a=t,"undefined"!=typeof window&&window.escape?window.escape(a):a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;");var a},if:function(t,a){return e(t)&&(t=t.call(this)),t?a.fn(this,a.data):a.inverse(this,a.data)},unless:function(t,a){return e(t)&&(t=t.call(this)),t?a.inverse(this,a.data):a.fn(this,a.data)},each:function(a,i){var n="",r=0;if(e(a)&&(a=a.call(this)),t(a)){for(i.hash.reverse&&(a=a.reverse()),r=0;r<a.length;r++)n+=i.fn(a[r],{first:0===r,last:r===a.length-1,index:r});i.hash.reverse&&(a=a.reverse())}else for(var s in a)r++,n+=i.fn(a[s],{key:s});return r>0?n:i.inverse(this)},with:function(t,a){return e(t)&&(t=t.call(this)),a.fn(t)},join:function(t,a){return e(t)&&(t=t.call(this)),t.join(a.hash.delimiter||a.hash.delimeter)},js:function(t,e){var a;return a=t.indexOf("return")>=0?"(function(){"+t+"})":"(function(){return ("+t+")})",eval.call(this,a).call(this)},js_compare:function(t,e){var a;return a=t.indexOf("return")>=0?"(function(){"+t+"})":"(function(){return ("+t+")})",eval.call(this,a).call(this)?e.fn(this,e.data):e.inverse(this,e.data)}}};var s=function(t,e){if(2===arguments.length){var a=new r(t),i=a.compile()(e);return a=null,i}return new r(t)};return s.registerHelper=function(t,e){r.prototype.helpers[t]=e},s.unregisterHelper=function(t){r.prototype.helpers[t]=void 0,delete r.prototype.helpers[t]},s.registerPartial=function(t,e){r.prototype.partials[t]={template:e}},s.unregisterPartial=function(t,e){r.prototype.partials[t]&&(r.prototype.partials[t]=void 0,delete r.prototype.partials[t])},s.compile=function(t,e){return new r(t,e).compile()},s.options=r.prototype.options,s.helpers=r.prototype.helpers,s.partials=r.prototype.partials,s}(),String.prototype.toPersianDigits=function(){var t=["۰","۱","۲","۳","۴","۵","۶","۷","۸","۹"];return this.replace(/[0-9]/g,(function(e){return t[+e]}))},String.prototype.toEnglishDigits=function(){var t={"۰":"0","۱":"1","۲":"2","۳":"3","۴":"4","۵":"5","۶":"6","۷":"7","۸":"8","۹":"9"};return this.replace(/[^0-9.]/g,(function(e){return t[e]||e}))},Template7.registerHelper("math",(function(t,e,a,i){return{"+":(t=parseFloat(t))+(a=parseFloat(a)),"-":t-a,"*":t*a,"/":t/a,"%":t%a}[e]})),Template7.registerHelper("mathPersian",(function(t,e,a,i){return{"+":(t=parseFloat(t))+(a=parseFloat(a)),"-":t-a,"*":t*a,"/":t/a,"%":t%a}[e].toString().toPersianDigits()})),Template7.registerHelper("persianDigits",(function(t,e){return t.toString().toPersianDigits()})),Template7.registerHelper("select",(function(t,e,a){var i=$("<select />").html(a.fn(this));if(void 0===t||!t||""===t)return i.html();if("string"==typeof t&&-1!==t.indexOf(",")){var n=t.split(",");$.each(n,(function(){i.find("["+e+"="+this+"]").attr({selected:"selected"})}))}else i.find("["+e+"="+t+"]").attr({selected:"selected"});return i.html()})),Template7.registerHelper("comma",(function(t,e){return t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}));var DMath={dtr:function(t){return t*Math.PI/180},rtd:function(t){return 180*t/Math.PI},sin:function(t){return Math.sin(this.dtr(t))},cos:function(t){return Math.cos(this.dtr(t))},tan:function(t){return Math.tan(this.dtr(t))},arcsin:function(t){return this.rtd(Math.asin(t))},arccos:function(t){return this.rtd(Math.acos(t))},arctan:function(t){return this.rtd(Math.atan(t))},arccot:function(t){return this.rtd(Math.atan(1/t))},arctan2:function(t,e){return this.rtd(Math.atan2(t,e))},fixAngle:function(t){return this.fix(t,360)},fixHour:function(t){return this.fix(t,24)},fix:function(t,e){return(t-=e*Math.floor(t/e))<0?t+e:t}},prayTimes=new PrayTimes;